<div class="productDetailContainer">
  <mat-card>
    <h1 *ngIf="product">Product Detail: {{ product.description }}</h1>
    <h1 *ngIf="!product">New Product</h1>
    <button
      class="back"
      mat-raised-button
      color="warn"
      type="button"
      (click)="goBack()"
    >
      Back to Products
    </button>

    <form [formGroup]="productForm" (ngSubmit)="saveChanges()">


      <mat-card-content>
        <!-- SKU Field -->
        <p><strong>SKU:</strong></p>
        <mat-form-field>
          <input matInput placeholder="Enter SKU" formControlName="sku" />
          <mat-error *ngIf="productForm.get('sku')?.hasError('required')">
            SKU is required.
          </mat-error>
        </mat-form-field>

        <!-- Description Field -->
        <p><strong>Description:</strong></p>
        <mat-form-field>
          <input
            matInput
            placeholder="Enter description"
            formControlName="description"
          />
          <mat-error *ngIf="productForm.get('description')?.hasError('required')">
            Description is required.
          </mat-error>
        </mat-form-field>

        <!-- Category Field -->
        <p><strong>Category:</strong></p>
        <mat-form-field>
          <mat-select
            class="categoryInput"
            formControlName="category"
            placeholder="Select a Category"
          >
            <mat-option *ngFor="let category of categories" [value]="category">
              {{ category.name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="productForm.get('category')?.hasError('required')">
            Category is required.
          </mat-error>
        </mat-form-field>

        <!-- Stock Field -->
        <p><strong>Stock:</strong></p>
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="Stock"
            formControlName="stock"
          />
          <mat-error *ngIf="productForm.get('stock')?.hasError('min')">
            Stock must be at least 0.
          </mat-error>
          <mat-error *ngIf="productForm.get('stock')?.hasError('required')">
            Stock is required.
          </mat-error>
        </mat-form-field>

        <!-- Minimum Stock Field -->
        <p><strong>Minimum Stock:</strong></p>
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="Minimum Stock"
            formControlName="minimumStock"
          />
          <mat-error *ngIf="productForm.get('minimumStock')?.hasError('required')">
            Minimum stock is required.
          </mat-error>
          <mat-error *ngIf="productForm.get('minimumStock')?.hasError('min')">
            Minimum stock must be at least 0.
          </mat-error>
        </mat-form-field>

        <!-- Price Field -->
        <p><strong>Price:</strong></p>
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="Price"
            formControlName="unitPrice"
          />
          <mat-error *ngIf="productForm.get('unitPrice')?.hasError('min')">
            Price must be greater than 0.
          </mat-error>
          <mat-error *ngIf="productForm.get('unitPrice')?.hasError('required')">
            Price is required.
          </mat-error>
        </mat-form-field>
      </mat-card-content>

      <mat-card-actions>
        <button mat-raised-button color="primary" type="submit">
          Save changes
        </button>
        <button
          mat-raised-button
          color="warn"
          type="button"
          (click)="confirmDelete()"
        >
          Delete Product
        </button>
      </mat-card-actions>
    </form>
  </mat-card>
</div>
